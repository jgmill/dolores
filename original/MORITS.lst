GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    07/06/18 12:06:55 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  *_______________________________________________________________________________
   2   
   3  *  This is MORITS (MOdel for Renewable Integration Through Storage), DIETER's little brother (Dispatch and Investment Evaluation Tool with Endogenous Renewables).
   4  *  It is used for the paper
   5  *  "On the economics of electrical storage for variable renewable energy sources"
   6  *  Coded by Alexander Zerrahn and Wolf-Peter Schill
   7  *  Version: 1.0
   8  *  Date of this version: February 9, 2018
   9   
  10  *  This tool can do more than what is used in the paper. Any feedback is welcome.
  11   
  12  *-------------------------------------------------------------------------------
  13   
  14  *  This code is licensed under an MIT license.
  15  *  Copyright (c) 2018 Alexander Zerrahn <azerrahn@diw.de>, Wolf-Peter Schill <wschill@diw.de>
  16  *  SPDX-License-Identifier: MIT
  17  *  Permission is hereby granted, free of charge, to any person obtaining a
  18  *  copy of this software and associated documentation files (the "Software"),
  19  *  to deal in the Software without restriction, including without limitation
  20  *  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  21  *  and/or sell copies of the Software, and to permit persons to whom the
  22  *  Software is furnished to do so, subject to the following conditions:
  23   
  24  *  The above copyright notice and this permission notice shall be included in
  25  *  all copies or substantial portions of the Software.
  26   
  27  *  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  28  *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  29  *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  30  *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  31  *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  32  *  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  33  *  IN THE SOFTWARE.
  34   
  35  *_______________________________________________________________________________
  36   
  37   
  38   
  39   
  40  * ------------- Base year ------------------------------------------------------
  41  * Select year between 2012 and 2016:
  43   
  44  * ------------- OBJECTIVE ------------------------------------------------------
  45  * Select an objective function by setting an asterisk (*)
  46  * Storage energy minimization (not used in the paper)?
  48   
  49  * Minimization of cost for storage only (not used in the paper)?
  51   
  52  * Minimization of cost for total energy system?
  54   
  55  * ------------- STORAGE --------------------------------------------------------
  56  * Select if storage may only charge renewables or also conventional electricity by setting an asterisk (*)
  57  * Storage only for renewables?
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    07/06/18 12:06:55 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


  59   
  60  * Storage also for conventional energy (not used in the paper)?
  62   
  63  * ------------- CONTEMPORANEOUS STORING IN AND OUT RESTRICTION -----------------
  64  * Select if contemporaneous storage loading and discharging should be penalized by setting an asterisk (*)
  65  * (only relevant for minimization of storage energy or storage costs)
  67   
  68  * ------------- Max curtailment or max loss? ----------------------------------
  69  * Select if storage losses should also be considered in the curtailment restriction by setting an asterisk (*)
  72   
  73  * ------------- P2X ------------------------------------------------------------
  74  * Select if additional flexible power-to-x demand shoulde be considered by setting an asterisk (*)
  76  * Auxiliary string (do not change):
  79   
  80   
  81  * ------------- Sanity checks --------------------------------------------------
  85   
  86  *_______________________________________________________________________________
  87   
  88   
  89   
  90  Sets
  91  h                Hours                                   /h1*h8760/
  92  ct               Dispatchable Technologies               /base, peak/
  93  res              Renewable technologies                  /renewable/
  94  sto              Storage technolgies                     /storage/
  95  p2x              Power-to-x technologies                 /p2x/
  96   
  97   
  98  *loop_curt        Solution loop for different curtailment or energy loss shares in per mille
  99  */0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, 110, 120, 130, 140, 150, 160, 170, 180, 190, 200, 250, 300, 350, 400, 450, 500/
 100   
 101  *$ontext
 102  loop_curt        Solution loop for different curtailment or energy loss shares in per mille /1000/
 105   
 106  loop_res_share   Solution loop for different shares of renewables
 107  /20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100/
 108   
 109  loop_p2x_power   Solution loop for different installed P2X capacities (MW)
 110  /0, 10000, 20000, 30000, 40000, 50000, 60000, 70000, 80000, 90000, 100000/
 111   
 112  loop_p2x_flh     Solution loop for different P2X full load hours
 113  /0, 500, 1000, 1500, 2000, 2500, 3000, 3500, 4000, 4500, 5000/
 114   
 115  year             Base years
 116  /2012, 2013, 2014, 2015, 2016/
 117  ;
 118   
 119  *-------------------------------------------------------------------------------
 120   
 121  Variables
 122  Z                        Objective
 123  ;
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    07/06/18 12:06:55 Page 3
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 124   
 125  Positive variables
 126  G_CON(ct,h)              Generation of conventional electricity
 127  G_RENEWABLE(res,h)       Generation of renewable energy
 128  CU(res,h)                Curtailment of renewable energy
 129  N_RENEWABLE(res)         Capacities: renewable energy
 130  N_CON(ct)                Capacities: conventional energy
 131  N_STO_E(sto)             Capacities: storage energy
 132  N_STO_P(sto)             Capacities: storage power
 133  STO_L(sto,h)             Storage level
 134  STO_IN(sto,h)            Storage intake
 135  STO_OUT(sto,h)           Storage generation
 136  P2X_IN(p2x,h)            Power-to-x intake
 137  ;
 138   
 139  Parameters
 140  phi_sto_ini(sto)         Level of storage in first and last period of the analysis
 141  eta_sto_in(sto)          Efficiency: storage in
 142  eta_sto_out(sto)         Efficiency: storage out
 143  phi_min_res              Minimum share of renewable electricity in net consumption
 144  phi_max_curt             Maximum share of renewable electricity curtailed over the year
 145  d(h)                     Electricity demand
 146  d_upload(h,year)         Electricity demand - upload parameter
 147  phi_res(res,h)           Hourly capacity factor renewable energy
 148  phi_res_upload(h,year)   Hourly capacity factor renewable energy - upload parameter
 149  c_i_sto_e(sto)           Cost: investment into storage energy
 150  c_i_sto_p(sto)           Cost: investment into storage power
 151  c_i_res(res)             Cost: investment into renewable capacity
 152  c_i_con(ct)              Cost: investment into conventional capacity
 153  c_var_con(ct)            Cost: variable generation costs conventional energy
 154  c_var_sto(sto)           Cost: variable generation costs storage
 155  penalty                  Penalty term
 156  share_solar(year)        Share of solar energy among total variable renewable energy
 157  share_wind(year)         Share of wind energy among total variable renewable energy
 158  p2x_power(p2x)           Power-to-x intake power
 159  p2x_flh(p2x)             Power-to-x full-load hours
 160  ;
 161   
 162  *-------------------------------------------------------------------------------
 163   
 164  phi_sto_ini(sto) = 0.5 ;
 165  eta_sto_in(sto) = 0.81 ;
 166  eta_sto_out(sto) = 0.926 ;
 167  penalty = 0 ;
 168   
 169  *Historical energy shares of wind and solar PV in base years
 170  *Source: OPSD (2017), see upload_data.xlsx
 171  share_solar('2012') = 0.378304182 ;
 172  share_solar('2013') = 0.385519442 ;
 173  share_solar('2014') = 0.390535228 ;
 174  share_solar('2015') = 0.310511627 ;
 175  share_solar('2016') = 0.310454625 ;
 176   
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    07/06/18 12:06:55 Page 4
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 177  share_wind('2012') = 0.621795818 ;
 178  share_wind('2013') = 0.614480558 ;
 179  share_wind('2014') = 0.609464772 ;
 180  share_wind('2015') = 0.689488373 ;
 181  share_wind('2016') = 0.689545375 ;
 182   
      penalty = 1000000 ;
      $ontext
 187   
 188  * Values assumed for 2035 - base analogous to lignite, peak analogous to OCGT efficient
 189  * Source:  W.-P. Schill, A. Zerrahn, F. Kunz, 2017. Prosumage of solar electricity: pros, cons, and the system perspective.
 190  *          Economic of Energy & Environmental Policy 6(1), 7-31, and the sources mentioned therein.
 191  *          https://doi.org/10.5547/2160-5890.6.1.wsch
 192  *$ontext
 193  c_i_sto_e(sto) = 5418.14 ;
 194  c_i_sto_p(sto) = 50995.48 ;
 195  c_i_res(res) =  share_solar('2014') * 60526.64 + share_wind('2014') * 108869.81 ;
 196  c_i_con('base') = 102393.68 ;
 197  c_i_con('peak') = 47840.27 ;
 198  c_var_con('base') = 31.03 ;
 199  c_var_con('peak') = 78.36 ;
 200  c_var_sto(sto) = 0.5 ;
 201  *$offtext
 202   
 203  *-------------------------------------------------------------------------------
 204   
 205  * Upload data
GDXIN   /Users/claudiaguenther/Documents/dolores/original/Data_input.gdx
 208  $load h1
****         $140
 209  ;
 210   
 211  * Initialize base year
 212  phi_res(res,h) = phi_res_upload(h,'2014') ;
****                                $141
 213  d(h) = d_upload(h,'2014') ;
****                $141
 214  *$stop
 215   
 216  *_______________________________________________________________________________
 217   
 218   
 219  Equations
 220  objective                Objective function
 221  energy_balance           Energy balance (market clearing)
 222  renewable_generation     Use of renewable energy generation
 223  minRES                   Constraint on minimum share of renewables
 224  maximum_curtailment      Constraint on maximum share of renewables curtailment
 225  maximum_loss             Constraint on maximum share of renewable energy loss
 226   
 227  maximum_generation_con   Capacity constraint - conventional generation
 228  stolev_start_end         Storage: storage level in the first and last period
 229  stolev                   Storage: storage level dynamics
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    07/06/18 12:06:55 Page 5
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 230  stolev_max               Storage: capacity constraint on maximum energy
 231  maxin_power              Storage: capacity constraint on maximum power - storing in
 232  maxout_power             Storage: capacity constraint on maximum power - storing out
 233   
 234  maxin_p2x                Power-to-x: constraint on maximum power - energy intake
 235  flh_p2x                  Power-to-x: full-load hours
 236  ;
 237   
 238  *-------------------------------------------------------------------------------
 239  ** OBJECTIVES
 240   
      objective..
               Z =E= sum( sto , N_STO_E(sto) ) + sum( (sto,h) , penalty * STO_IN(sto,h) )
      ;
      $ontext
 247   
      objective..
               Z =E= sum( sto , c_i_sto_e(sto) * N_STO_E(sto) + c_i_sto_p(sto) * N_STO_P(sto) ) + sum( (sto,h) , penalty * STO_IN(sto,h) )
      ;
      $ontext
 254   
 255  *$ontext
 256  objective..
 257           Z =E= sum( sto , c_i_sto_e(sto) * N_STO_E(sto) + c_i_sto_p(sto) * N_STO_P(sto) )
 258           + sum( res , c_i_res(res) * N_RENEWABLE(res) )
 259           + sum( ct , c_i_con(ct) * N_CON(ct) )
 260           + sum( (ct,h) , c_var_con(ct) * G_CON(ct,h) )
 261           + sum( (sto,h) , c_var_sto(sto) * (STO_IN(sto,h) + STO_OUT(sto,h)) )
 262  ;
 265   
 266  *-------------------------------------------------------------------------------
 267  ** ENERGY BALANCE AND RENEWABLES USE
 268   
 269  *$ontext
 270  energy_balance(h)..
 271           sum( ct , G_CON(ct,h)) + sum( res , G_RENEWABLE(res,h)) + sum( sto , STO_OUT(sto,h))
 272           =E= d(h)
 273  ;
 274   
 275  renewable_generation(res,h)..
 276           phi_res(res,h) * N_RENEWABLE(res)
 277           =E= G_RENEWABLE(res,h) + CU(res,h) + sum( sto , STO_IN(sto,h))
 278  *        + sum( p2x , P2X_IN(p2x,h))
 279  ;
 282   
      energy_balance(h)..
                sum( ct , G_CON(ct,h)) + sum( res , G_RENEWABLE(res,h)) + sum( sto , STO_OUT(sto,h)) =E= d(h) + sum( sto , STO_IN(sto,h) )
      ;
       
      renewable_generation(res,h)..
               phi_res(res,h) * N_RENEWABLE(res) =E= G_RENEWABLE(res,h) + CU(res,h)
      ;
      $ontext
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    07/06/18 12:06:55 Page 6
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 293   
 294  *-------------------------------------------------------------------------------
 295  ** MINIMUM AND MAXIMUM SHARES
 296   
 297  minRES..
 298           sum( (ct,h) , G_CON(ct,h) ) =L= (1-phi_min_res) * sum( h , d(h) )
 299  ;
 300   
 301  maximum_curtailment..
 302           sum( (res,h) , CU(res,h) ) =L= phi_max_curt * sum( (res,h) , phi_res(res,h) * N_RENEWABLE(res) )
 303  ;
 304   
 305  maximum_loss..
 306           sum( (res,h) , CU(res,h) ) + sum( (sto,h) , STO_IN(sto,h) - STO_OUT(sto,h) )
 307                   =L= phi_max_curt * sum( (res,h) , phi_res(res,h) * N_RENEWABLE(res) )
 308  ;
 309   
 310  *-------------------------------------------------------------------------------
 311  ** CONVENTIONAL GENERATION
 312   
 313  maximum_generation_con(ct,h)..
 314           G_CON(ct,h) =L= N_CON(ct)
 315  ;
 316   
 317  *-------------------------------------------------------------------------------
 318  ** STORAGE
 319   
 320  stolev(sto,h)$( ord(h) > 1 )..
 321           STO_L(sto,h) =E= STO_L(sto,h-1) + STO_IN(sto,h) * eta_sto_in(sto) - STO_OUT(sto,h)/eta_sto_out(sto)
 322  ;
 323   
 324  stolev_start_end(sto)..
 325           STO_L(sto,'h1') =E= STO_L(sto,'h8760')
 326  ;
 327   
 328  stolev_max(sto,h)..
 329          STO_L(sto,h) =L= N_STO_E(sto)
 330  ;
 331   
 332  maxin_power(sto,h)..
 333           STO_IN(sto,h) =L= N_STO_P(sto)
 334  ;
 335   
 336  maxout_power(sto,h)..
 337           STO_OUT(sto,h) =L= N_STO_P(sto)
 338  ;
 339   
 340  *-------------------------------------------------------------------------------
 341  ** POWER-TO-X
 342   
 343  maxin_p2x(p2x,h)..
 344           P2X_IN(p2x,h) =L= p2x_power(p2x)
 345  ;
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    07/06/18 12:06:55 Page 7
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 346   
 347  flh_p2x(p2x)..
 348           sum( h , P2X_IN(p2x,h)) =E= p2x_flh(p2x) * p2x_power(p2x)
 349  ;
 350   
 351  *_______________________________________________________________________________
 352   
 353   
 354  Model morits_min_sto_e /
 355  objective
 356   
 357  energy_balance
 358  renewable_generation
 359  minRES
 360   
      maximum_loss
      $ontext
 365   
      maximum_curtailment
      $ontext
 370   
 371  stolev_start_end
 372  stolev
 373  stolev_max
 374   
 375  *maxin_p2x
 376  *flh_p2x
 377  /
 378  ;
 379   
 380  Model morits_min_cost_sto /
 381  objective
 382   
 383  energy_balance
 384  renewable_generation
 385  minRES
 386   
      maximum_loss
      $ontext
 391   
      maximum_curtailment
      $ontext
 396   
 397  stolev_start_end
 398  stolev
 399  stolev_max
 400  maxin_power
 401  maxout_power
 402   
 403  *maxin_p2x
 404  *flh_p2x
 405  /
 406  ;
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    07/06/18 12:06:55 Page 8
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 407   
 408  Model morits_min_cost_all /
 409  objective
 410   
 411  energy_balance
 412  renewable_generation
 413  minRES
 414  maximum_generation_con
 415   
      maximum_loss
      $ontext
 420   
      maximum_curtailment
      $ontext
 425   
 426  stolev_start_end
 427  stolev
 428  stolev_max
 429  maxin_power
 430  maxout_power
 431   
 432  *maxin_p2x
 433  *flh_p2x
 434  /
 435   
 436   
 437  *_______________________________________________________________________________
 438   
 439   
 440  options
 441  optcr = 0.00
 442  reslim = 10000000
 443  lp = cplex
 444  mip = cplex
 445  nlp = conopt
 446  dispwidth = 15
 447  limrow = 0
 448  limcol = 0
 449  solprint = off
 450  sysout = off
 451  optcr = 1e-3
 452  optca = 10
 453  ;
 454   
 462   
 463  morits_min_sto_e.OptFile = 1;
 464  morits_min_sto_e.holdFixed = 1 ;
 465   
 466  morits_min_cost_sto.OptFile = 1;
 467  morits_min_cost_sto.holdFixed = 1 ;
 468   
 469  morits_min_cost_all.OptFile = 1;
 470  morits_min_cost_all.holdFixed = 1 ;
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                    07/06/18 12:06:55 Page 9
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 471   
 472   
 473  *_______________________________________________________________________________
 474   
 475  * Preparation of GUSS tool for scenario analysis
 476  phi_min_res = eps ;
 477  phi_max_curt = eps ;
 478  p2x_power(p2x) = eps ;
 479  p2x_flh(p2x) = eps ;
 480   
 482   
 483  Set
 484  modelstats       model stats collection          /modelstat, solvestat, resusd/
 485  superscen        Scenarios                       /scen1*scen1000/
 486  map(superscen,loop_res_share,loop_curt)     /#superscen:(#loop_res_share.#loop_curt)/
 487  *map(superscen,loop_res_share,loop_curt,loop_p2x_power,loop_p2x_flh) /#superscen:(#loop_res_share.#loop_curt.#loop_p2x_power.#loop_p2x_flh)/
 488  ;
 489   
 490  Set
 491  scen(superscen);
 492  scen(superscen) = yes$( sum((loop_res_share,loop_curt) , map(superscen,loop_res_share,loop_curt)) )    ;
 493  *scen(superscen) = yes$( sum((loop_res_share,loop_curt,loop_p2x_power,loop_p2x_flh) , map(superscen,loop_res_share,loop_curt,loop_p2x_power,loop_p2x_flh)) )    ;
 494   
 495  Parameters
 496  gussoptions                              /Logoption 2, Optfile 1, Skipbasecase 1/
 497  modstats(superscen, modelstats)
 498  min_res
 499  max_curt
 500  p2x_power_scen
 501  p2x_flh_scen
 502  ;
 503   
 504  min_res(scen) = sum( (loop_res_share,loop_curt)$map(scen,loop_res_share,loop_curt) , loop_res_share.val/100 ) ;
 505  max_curt(scen) = sum( (loop_res_share,loop_curt)$map(scen,loop_res_share,loop_curt) , loop_curt.val/1000 ) ;
 506  *min_res(scen) = sum( (loop_res_share,loop_curt,loop_p2x_power,loop_p2x_flh)$map(scen,loop_res_share,loop_curt,loop_p2x_power,loop_p2x_flh) , loop_res_share.val/100 ) ;
 507  *max_curt(scen) = sum( (loop_res_share,loop_curt,loop_p2x_power,loop_p2x_flh)$map(scen,loop_res_share,loop_curt,loop_p2x_power,loop_p2x_flh) , loop_curt.val/1000 ) ;
 508  *p2x_power_scen(scen,p2x) = sum( (loop_res_share,loop_curt,loop_p2x_power,loop_p2x_flh)$map(scen,loop_res_share,loop_curt,loop_p2x_power,loop_p2x_flh) , loop_p2x_power.val ) ;
 509  *p2x_flh_scen(scen,p2x) = sum( (loop_res_share,loop_curt,loop_p2x_power,loop_p2x_flh)$map(scen,loop_res_share,loop_curt,loop_p2x_power,loop_p2x_flh) , loop_p2x_flh.val ) ;
 510   
 511  Parameters
 512  marginal_minRES(superscen)
 513  marginal_energy_balance(superscen,h)
 514   
 515  lev_Z(superscen)
 516  lev_G_CON(superscen,ct,h)
 517  lev_G_RENEWABLE(superscen,res,h)
 518  lev_CU(superscen,res,h)
 519  lev_STO_IN(superscen,sto,h)
 520  lev_STO_OUT(superscen,sto,h)
 521  lev_STO_L(superscen,sto,h)
 522  lev_N_RENEWABLE(superscen,res)
 523  lev_N_CON(superscen,ct)
 524  lev_N_STO_E(superscen,sto)
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                   07/06/18 12:06:55 Page 10
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 525  lev_N_STO_P(superscen,sto)
 526  lev_P2X_IN(superscen,p2x,h)
 527   
 528  marg_N_RENEWABLE(superscen,res)
 529  marg_N_STO_E(superscen,sto)
 530  marg_N_STO_P(superscen,sto)
 531  marg_N_CON(superscen,ct)
 532  ;
 533   
 534   
 535  * Definition of dictionary set for GUSS tool
 536  Set dict(*,*,*) /
 537  scen             .scenario       .''
 538  gussoptions      .opt            .modstats
 539   
 540  phi_min_res      .param          .min_res
 541   
      phi_max_curt     .param          .max_curt
      $ontext
 546   
 547  minRES           .marginal       .marginal_minRES
 548   
 549  *p2x_power       .param          .p2x_power_scen
 550  *p2x_flh         .param          .p2x_flh_scen
 551   
 552  Z                .level          .lev_Z
 553  G_CON            .level          .lev_G_CON
 554  G_RENEWABLE      .level          .lev_G_RENEWABLE
 555  CU               .level          .lev_CU
 556  STO_IN           .level          .lev_STO_IN
 557  STO_OUT          .level          .lev_STO_OUT
 558  STO_L            .level          .lev_STO_L
 559   
 560  N_RENEWABLE      .level          .lev_N_RENEWABLE
 561  N_STO_E          .level          .lev_N_STO_E
 562   
 563  N_RENEWABLE      .marginal       .marg_N_RENEWABLE
 564  N_STO_E          .marginal       .marg_N_STO_E
 565   
 566  *P2X_IN  .level          .lev_P2X_IN
 567   
      N_STO_P          .level          .lev_N_STO_P
      N_STO_P          .marginal       .marg_N_STO_P
      $ontext
 573   
 574  *$ontext
 575  N_CON            .level          .lev_N_CON
 576  N_STO_P          .level          .lev_N_STO_P
 577   
 578  N_STO_P          .marginal       .marg_N_STO_P
 579  N_CON            .marginal       .marg_N_CON
 582  /
 583  ;
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                   07/06/18 12:06:55 Page 11
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 584   
 585  *_______________________________________________________________________________
 586  *Solve
 587   
      solve morits_min_sto_e using lp min Z scenario dict;
      $ontext
 592   
      solve morits_min_cost_sto using lp min Z scenario dict;
      $ontext
 597   
 598  *$ontext
 599  solve morits_min_cost_all using lp min Z scenario dict;
****                                                        $257
 602   
 603  *$stop
 604   
 605  *_______________________________________________________________________________
 606  *Reporting
 607   
 608  * Parameters for the report file
 609   
 610  Scalar eps_rep_rel Sensitivity for shares defined between 0 and 1        / 1e-4 / ;
 611  Scalar eps_rep_abs Sensitivity for absolute values - e.g. hourly         / 1e-2 / ;
 612  Scalar eps_rep_ins Sensitivity for absolute values - e.g. installed MW   / 1 /    ;
 613   
 614  Parameter
 615  report
 616  report_tech
 617  report_hours
 618  report_cost
 619  report_marginal
 620  ;
 621   
 623  *$setglobal reportset "loop_res_share,loop_curt,loop_p2x_power,loop_p2x_flh"
 624   
 625  *-------------------------------------------------------------------------------
 626  *Report
 627   
 628           report('model status',loop_res_share,loop_curt) = sum(scen$(map(scen,loop_res_share,loop_curt)) , modstats(scen, 'modelstat')) ;
****                                                                                                                    $141
 629           report('solve time',loop_res_share,loop_curt) = sum(scen$(map(scen,loop_res_share,loop_curt)) , modstats(scen, 'resusd')) ;
 630           report('obj value',loop_res_share,loop_curt) = sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_Z(scen) ) ;
****                                                                                                              $141
 631           report('net energy demand',loop_res_share,loop_curt) = sum( scen$(map(scen,loop_res_share,loop_curt)) , sum( h , d(h) )) ;
 632           report('renewables available',loop_res_share,loop_curt) = sum( scen$(map(scen,loop_res_share,loop_curt)) , sum( (res,h) , phi_res(res,h) * lev_N_RENEWABLE(scen,res) )) ;
****                                                                                                                                                                    $141
 633           report('renewables used directly',loop_res_share,loop_curt) = sum( scen$(map(scen,loop_res_share,loop_curt)) , sum( (res,h) , lev_G_RENEWABLE(scen,res,h) )) / report('renewables available',loop_res_share,loop_curt)  ;
****                                                                                                                                                       $141
 634           report('renewables curtailed absolute',loop_res_share,loop_curt) = sum((res,h), sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_CU(scen,res,h))) ;
****                                                                                                                                                $141
 635           report('renewables curtailed relative',loop_res_share,loop_curt)$(sum((res,h), sum(scen$(map(scen,loop_res_share,loop_curt)) , phi_res(res,h) * lev_N_RENEWABLE(scen,res) ) ) > eps_rep_abs*card(res)*card(h)) = sum((res,h), sum(scen$(map(scen
      ,loop_res_share,loop_curt)) , lev_CU(scen,res,h) )) / sum((res,h), sum(scen$(map(scen,loop_res_share,loop_curt)) , phi_res(res,h) * lev_N_RENEWABLE(scen,res)  )) ;
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                   07/06/18 12:06:55 Page 12
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 636           report('renewables stored',loop_res_share,loop_curt) = sum((sto,h), sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_STO_IN(scen,sto,h))) / report('renewables available',loop_res_share,loop_curt) ;
****                                                                                                                                        $141
 637  *report('renewables used for p2x',loop_res_share,loop_curt) = sum((p2x,h), sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_P2X_IN(scen,p2x,h))) / report('renewables available',loop_res_share,loop_curt) ;
 638           report('renewables lost in storage',loop_res_share,loop_curt) = sum((sto,h), sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_STO_IN(scen,sto,h) - lev_STO_OUT(scen,sto,h))) / report('renewables available',loop_res_share,loop_curt)  ;
****                                                                                                                                                                           $141
 639           report('renewables lost total',loop_res_share,loop_curt) = (sum((sto,h), sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_STO_IN(scen,sto,h) - lev_STO_OUT(scen,sto,h))) + sum((res,h), sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_C
      U(scen,res,h)))) / report('renewables available',loop_res_share,loop_curt)  ;
 640           report('"efficiency"',loop_res_share,loop_curt) = 1 - report('renewables lost total',loop_res_share,loop_curt) ;
 641           report('renshare total',loop_res_share,loop_curt) = sum( h, sum(scen$(map(scen,loop_res_share,loop_curt)) , sum( res , lev_G_RENEWABLE(scen,res,h)) + sum( sto , lev_STO_OUT(scen,sto,h)) )) / sum( scen$(map(scen,loop_res_share,loop_curt)) , 
      sum( h , d(h) )) ;    ;
 642           report('hours with contemp storing in and out',loop_res_share,loop_curt) = sum(scen$(map(scen,loop_res_share,loop_curt)) , sum( (sto,h)$(lev_STO_IN(scen,sto,h) > 0 AND lev_STO_OUT(scen,sto,h) > 0) , 1 )) ;
 643   
 644           report_marginal('capacity renewables',loop_res_share,loop_curt,res) =  sum( scen$(map(scen,loop_res_share,loop_curt)) , marg_N_RENEWABLE(scen,res)) ;
****                                                                                                                                                  $141
 645           report_marginal('capacity storage energy',loop_res_share,loop_curt,sto) =  sum( scen$(map(scen,loop_res_share,loop_curt)) , marg_N_STO_E(scen,sto)) ;
****                                                                                                                                                  $141
 646   
 647           report_hours('demand',loop_res_share,loop_curt,'demand',h) = d(h) ;
 648           report_hours('generation conventional',loop_res_share,loop_curt,ct,h) =  sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_G_CON(scen,ct,h) ) ;
****                                                                                                                                            $141
 649           report_hours('generation renewable',loop_res_share,loop_curt,res,h) = sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_G_RENEWABLE(scen,res,h) ) ;
 650           report_hours('curtailment of fluct res',loop_res_share,loop_curt,res,h) =  sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_CU(scen,res,h) ) ;
 651           report_hours('generation storage',loop_res_share,loop_curt,sto,h) =  sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_STO_OUT(scen,sto,h)   ) ;
 652           report_hours('storage loading',loop_res_share,loop_curt,sto,h) =  sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_STO_IN(scen,sto,h)  ) ;
 653           report_hours('storage level',loop_res_share,loop_curt,sto,h) =  sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_STO_L(scen,sto,h)  ) ;
****                                                                                                                                   $141
 654  *report_hours('p2x loading',loop_res_share,loop_curt,p2x,h) =  sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_P2X_IN(scen,p2x,h)  ) ;
 655           report_hours('residual load (before curt and sto)',loop_res_share,loop_curt,'demand',h) =  sum(scen$(map(scen,loop_res_share,loop_curt)) , d(h) - sum( res , phi_res(res,h) * lev_N_RENEWABLE(scen,res)) ) / 1000 ;
 656           report_hours('residual load (after curt)',loop_res_share,loop_curt,'demand',h) =  sum(scen$(map(scen,loop_res_share,loop_curt)) , d(h) - sum( res , phi_res(res,h) * lev_N_RENEWABLE(scen,res) - lev_CU(scen,res,h) ) ) / 1000 ;
 657           report_hours('residual load (after curt and sto)',loop_res_share,loop_curt,'demand',h) =  sum(scen$(map(scen,loop_res_share,loop_curt)) , d(h) - sum( res , phi_res(res,h) * lev_N_RENEWABLE(scen,res) - lev_CU(scen,res,h)) - sum( sto , lev_ST
      O_OUT(scen,sto,h) - lev_STO_IN(scen,sto,h))  ) / 1000 ;
 658  *report_hours('residual load (after p2x)',loop_res_share,loop_curt,'demand',h) =  sum(scen$(map(scen,loop_res_share,loop_curt)) , d(h) - sum( res , phi_res(res,h) * lev_N_RENEWABLE(scen,res)) + sum( p2x , lev_P2X_IN(scen,p2x,h)) ) / 1000 ;
 659  *report_hours('residual load (after curt and sto and p2x)',loop_res_share,loop_curt,'demand',h) =  sum(scen$(map(scen,loop_res_share,loop_curt)) , d(h) - sum( res , phi_res(res,h) * lev_N_RENEWABLE(scen,res) - lev_CU(scen,res,h)) - sum( sto , lev_ST
      O_OUT(scen,sto,h) - lev_STO_IN(scen,sto,h)) + sum( p2x , lev_P2X_IN(scen,p2x,h)) ) / 1000 ;
 660   
 661           report_tech('capacities renewable GW',loop_res_share,loop_curt,res) = 0 + sum( scen$(map(scen,loop_res_share,loop_curt)) , lev_N_RENEWABLE(scen,res)) / 1000 ;
 662           report_tech('capacities storage GWh',loop_res_share,loop_curt,sto) =  sum( scen$(map(scen,loop_res_share,loop_curt)) , lev_N_STO_E(scen,sto)) / 1000 ;
****                                                                                                                                            $141
 663  *report_tech('check flh p2x',loop_res_share,loop_curt,p2x) =  sum( scen$(map(scen,loop_res_share,loop_curt)) , sum( h , lev_P2X_IN(scen,p2x,h)) / p2x_power_scen(scen,p2x) ) ;
 664           report_tech('renewables curtailed absolute',loop_res_share,loop_curt,res) =  sum(h, sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_CU(scen,res,h) )) ;
 665           report_tech('renewables curtailed relative',loop_res_share,loop_curt,res)$(report_tech('renewables curtailed absolute',loop_res_share,loop_curt,res) AND sum(h, sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_G_RENEWABLE(scen,res,h) ) ) 
      + sum(h, sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_CU(scen,res,h))) > card(h)*eps_rep_abs ) =  sum(h, sum(scen$(map(scen,loop_res_share,loop_curt)) , lev_CU(scen,res,h)  ))/( sum(h , sum(scen$(map(scen,loop_res_share,loop_curt)) , phi_res(
      res,h)*(lev_N_RENEWABLE(scen,res) ))) ) ;
 666   
 667           report_cost('cost renewables in bn euro',loop_res_share,loop_curt,res) = sum(scen$(map(scen,loop_res_share,loop_curt)) , c_i_res(res) * lev_N_RENEWABLE(scen,res)) / 1e9 ;
 668           report_cost('cost storage energy in bn euro',loop_res_share,loop_curt,sto) = sum(scen$(map(scen,loop_res_share,loop_curt)) , c_i_sto_e(sto) * lev_N_STO_E(scen,sto)) / 1e9 ;
 669   
               report_tech('implicit capacities storage GW',%reportset%,sto) =  0 + sum( scen$(map(scen,%reportset%)) , max( smax( h , lev_STO_IN(scen,sto,h)), smax( h, lev_STO_OUT(scen,sto,h)))) / 1000 ;
               report_tech('implicit capacities conventional GW',%reportset%,ct) = 0 + sum( scen$(map(scen,%reportset%)) , smax( h , lev_G_CON(scen,ct,h)) ) / 1000 ;
               report_tech('implicit EP ratio storage',%reportset%,sto) = report_tech('capacities storage GWh',%reportset%,sto) / report_tech('implicit capacities storage GW',%reportset%,sto) ;
               report_tech('implicit FLH storage',%reportset%,sto) = sum( scen$(map(scen,%reportset%)) , sum( h , lev_STO_OUT(scen,sto,h))) / (1000 * report_tech('implicit capacities storage GW',%reportset%,sto))   ;
       
               report_cost('cost storage power (implicit) in bn euro',%reportset%,sto) = sum(scen$(map(scen,%reportset%)) , c_i_sto_p(sto) * 1000 * report_tech('implicit capacities storage GW',%reportset%,sto)) / 1e9 ;
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                   07/06/18 12:06:55 Page 13
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


               report_cost('cost investment conventional (implicit) in bn euro in bn euo',%reportset%,ct) = sum(scen$(map(scen,%reportset%)) , c_i_con(ct) * 1000 * report_tech('implicit capacities conventional GW',%reportset%,ct)) / 1e9 ;
               report_cost('cost operation conventional (implicit) in bn euro',%reportset%,ct) = sum(scen$(map(scen,%reportset%)) , sum( h , c_var_con(ct) * lev_G_CON(scen,ct,h))) / 1e9 ;
               report_cost('cost total (implicit) in bn euro',%reportset%,'total') = sum( res , report_cost('cost renewables in bn euro',%reportset%,res)) + sum( sto , report_cost('cost storage energy in bn euro',%reportset%,sto) + report_cost('cost stora
      ge power (implicit) in bn euro',%reportset%,sto)) + sum( ct , report_cost('cost investment conventional (implicit) in bn euro in bn euo',%reportset%,ct) + report_cost('cost operation conventional (implicit) in bn euro',%reportset%,ct)) ;
      $ontext
 682   
               report_tech('capacities storage GW',%reportset%,sto) =  sum( scen$(map(scen,%reportset%)) , lev_N_STO_P(scen,sto)) / 1000 ;
               report_tech('implicit capacities conventional GW',%reportset%,ct) = 0 + sum( scen$(map(scen,%reportset%)) , smax( h , lev_G_CON(scen,ct,h)) ) / 1000 ;
               report_tech('EP ratio storage',%reportset%,sto) = report_tech('capacities storage GWh',%reportset%,sto) / report_tech('capacities storage GW',%reportset%,sto) ;
               report_tech('FLH storage',%reportset%,sto) = sum( scen$(map(scen,%reportset%)) , sum( h , lev_STO_OUT(scen,sto,h))) / sum( scen$(map(scen,%reportset%)) ,lev_N_STO_P(scen,sto) )   ;
       
               report_cost('cost storage power in bn euro',%reportset%,sto) = sum(scen$(map(scen,%reportset%)) , c_i_sto_p(sto) * lev_N_STO_P(scen,sto)) / 1e9 ;
               report_cost('cost investment conventional (implicit) in bn euro in bn euo',%reportset%,ct) = sum(scen$(map(scen,%reportset%)) , c_i_con(ct) * 1000 * report_tech('implicit capacities conventional GW',%reportset%,ct)) / 1e9 ;
               report_cost('cost operation conventional (implicit) in bn euro',%reportset%,ct) = sum(scen$(map(scen,%reportset%)) , sum( h , c_var_con(ct) * lev_G_CON(scen,ct,h))) / 1e9 ;
               report_cost('cost total (implicit) in bn euro',%reportset%,'total') = sum( res , report_cost('cost renewables in bn euro',%reportset%,res)) + sum( sto , report_cost('cost storage energy in bn euro',%reportset%,sto) + report_cost('cost stora
      ge power in bn euro',%reportset%,sto)) + sum( ct , report_cost('cost investment conventional (implicit) in bn euro in bn euo',%reportset%,ct) + report_cost('cost operation conventional (implicit) in bn euro',%reportset%,ct)) ;
       
               report_marginal('capacity storage power',%reportset%,sto) =  sum( scen$(map(scen,%reportset%)) , marg_N_STO_P(scen,sto)) ;
      $ontext
 697   
 698  *$ontext
 699           report_tech('capacities storage GW',loop_res_share,loop_curt,sto) =  sum( scen$(map(scen,loop_res_share,loop_curt)) , lev_N_STO_P(scen,sto)) / 1000 ;
****                                                                                                                                           $141
 700           report_tech('capacities conventional GW',loop_res_share,loop_curt,ct) = 0 + sum( scen$(map(scen,loop_res_share,loop_curt)) , lev_N_CON(scen,ct)) / 1000 ;
****                                                                                                                                                $141
 701           report_tech('EP ratio storage',loop_res_share,loop_curt,sto) = report_tech('capacities storage GWh',loop_res_share,loop_curt,sto) / report_tech('capacities storage GW',loop_res_share,loop_curt,sto) ;
 702           report_tech('FLH storage',loop_res_share,loop_curt,sto) = sum( scen$(map(scen,loop_res_share,loop_curt)) , sum( h , lev_STO_OUT(scen,sto,h))) / sum( scen$(map(scen,loop_res_share,loop_curt)) ,lev_N_STO_P(scen,sto) )   ;
 703   
 704           report_cost('cost storage power in bn euro',loop_res_share,loop_curt,sto) = sum(scen$(map(scen,loop_res_share,loop_curt)) , c_i_sto_p(sto) * lev_N_STO_P(scen,sto)) / 1e9 ;
 705           report_cost('cost investment conventional in bn euro',loop_res_share,loop_curt,ct) = sum(scen$(map(scen,loop_res_share,loop_curt)) , c_i_con(ct) * lev_N_CON(scen,ct)) / 1e9 ;
 706           report_cost('cost operation conventional in bn euro',loop_res_share,loop_curt,ct) = sum(scen$(map(scen,loop_res_share,loop_curt)) , sum( h , c_var_con(ct) * lev_G_CON(scen,ct,h))) / 1e9 ;
 707           report_cost('cost total in bn euro',loop_res_share,loop_curt,'total') = report('obj value',loop_res_share,loop_curt) / 1e9 ;
 708   
 709           report_marginal('capacity conventional',loop_res_share,loop_curt,ct) =  sum( scen$(map(scen,loop_res_share,loop_curt)) , marg_N_CON(scen,ct)) ;
****                                                                                                                                             $141
 710           report_marginal('capacity storage power',loop_res_share,loop_curt,sto) =  sum( scen$(map(scen,loop_res_share,loop_curt)) , marg_N_STO_P(scen,sto)) ;
****                                                                                                                                                 $141
 713   
 714  *-------------------------------------------------------------------------------
 715   
 716                   report('obj value',loop_res_share,loop_curt)$(report('obj value',loop_res_share,loop_curt) < eps_rep_abs) = 0 ;
 717                   report('net energy demand',loop_res_share,loop_curt)$(report('net energy demand',loop_res_share,loop_curt) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 718                   report('renewables available',loop_res_share,loop_curt)$(report('renewables available',loop_res_share,loop_curt) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 719                   report('renewables used directly',loop_res_share,loop_curt)$(report('renewables used directly',loop_res_share,loop_curt) < eps_rep_rel OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 720                   report('renewables curtailed absolute',loop_res_share,loop_curt)$(report('renewables curtailed absolute',loop_res_share,loop_curt) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 721                   report('renewables curtailed relative',loop_res_share,loop_curt)$(report('renewables curtailed relative',loop_res_share,loop_curt) < eps_rep_rel OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 722                   report('renewables stored',loop_res_share,loop_curt)$(report('renewables stored',loop_res_share,loop_curt) < eps_rep_rel OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 723  *        report('renewables used for p2x',loop_res_share,loop_curt)$(report('renewables used for p2x',loop_res_share,loop_curt) < eps_rep_rel OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 724                   report('renewables lost in storage',loop_res_share,loop_curt)$(report('renewables lost in storage',loop_res_share,loop_curt) < eps_rep_rel OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 725                   report('renewables lost total',loop_res_share,loop_curt)$(report('renewables lost total',loop_res_share,loop_curt) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 726                   report('"efficiency"',loop_res_share,loop_curt)$(report('"efficiency"',loop_res_share,loop_curt) < eps_rep_rel OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 727                   report('renshare total',loop_res_share,loop_curt)$(report('renshare total',loop_res_share,loop_curt) < eps_rep_rel OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 728                   report('hours with comtemp storing in and out',loop_res_share,loop_curt)$(report('hours with comtemp storing in and out',loop_res_share,loop_curt) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                   07/06/18 12:06:55 Page 14
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


 729   
 730                   report_hours('generation conventional',loop_res_share,loop_curt,ct,h)$(report_hours('generation conventional',loop_res_share,loop_curt,ct,h) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 731                   report_hours('generation renewable',loop_res_share,loop_curt,res,h)$(report_hours('generation renewable',loop_res_share,loop_curt,res,h) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 732                   report_hours('curtailment of fluct res',loop_res_share,loop_curt,res,h)$(report_hours('curtailment of fluct res',loop_res_share,loop_curt,res,h) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 733                   report_hours('generation storage',loop_res_share,loop_curt,sto,h)$(report_hours('generation storage',loop_res_share,loop_curt,sto,h) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 734                   report_hours('storage loading',loop_res_share,loop_curt,sto,h)$(report_hours('storage loading',loop_res_share,loop_curt,sto,h) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 735                   report_hours('storage level',loop_res_share,loop_curt,sto,h)$(report_hours('storage level',loop_res_share,loop_curt,sto,h) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 736                   report_hours('residual load (before storage)',loop_res_share,loop_curt,'demand',h)$(report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 737                   report_hours('residual load (after storage)',loop_res_share,loop_curt,'demand',h)$(report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 738  *        report_hours('residual load (after p2x)',loop_res_share,loop_curt,'demand',h)$(report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 739  *        report_hours('residual load (after storage and p2x)',loop_res_share,loop_curt,'demand',h)$(report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 740   
 741                   report_tech('capacities renewable GW',loop_res_share,loop_curt,res)$(report_tech('capacities renewable GW',loop_res_share,loop_curt,res) < eps_rep_ins OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 742                   report_tech('capacities storage GWh',loop_res_share,loop_curt,sto)$(report_tech('capacities storage GWh',loop_res_share,loop_curt,sto) < eps_rep_ins OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 743  *        report_tech('check flh p2x',loop_res_share,loop_curt,p2x)$(report_tech('check flh p2x',loop_res_share,loop_curt,p2x) < eps_rep_ins OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 744                   report_tech('renewables curtailed absolute',loop_res_share,loop_curt,res)$(report_tech('renewables curtailed absolute',loop_res_share,loop_curt,res) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 745                   report_tech('renewables curtailed relative',loop_res_share,loop_curt,res)$(report_tech('renewables curtailed relative',loop_res_share,loop_curt,res) < eps_rep_rel OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 746   
 747                   report_cost('cost renewables in bn euro',loop_res_share,loop_curt,res)$(report_cost('cost renewables in bn euro',loop_res_share,loop_curt,res) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 748                   report_cost('cost storage energy bn euro',loop_res_share,loop_curt,sto)$(report_cost('cost storage energy in bn euro',loop_res_share,loop_curt,sto) < eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 749   
                       report_tech('implicit capacities storage GW',%reportset%,sto)$(report_tech('implicit capacities storage GW',%reportset%,sto) < eps_rep_ins OR report('model status',%reportset%) <> 1) = 0 ;
                       report_tech('implicit capacities conventional GW',%reportset%,ct)$(report_tech('implicit capacities conventional GW',%reportset%,ct) < eps_rep_ins OR report('model status',%reportset%) <> 1) = 0 ;
                       report_tech('implicit EP ratio storage',%reportset%,sto)$(report_tech('implicit EP ratio storage',%reportset%,sto) < eps_rep_rel OR report('model status',%reportset%) <> 1) = 0 ;
                       report_tech('implicit FLH storage',%reportset%,sto)$(report_tech('implicit FLH storage',%reportset%,sto) < eps_rep_abs OR report('model status',%reportset%) <> 1) = 0 ;
       
                       report_cost('cost storage power (implicit) in bn euro',%reportset%,sto)$(report_cost('cost storage power (implicit) in bn euro',%reportset%,sto) < eps_rep_abs OR report('model status',%reportset%) <> 1) = 0 ;
                       report_cost('cost investment conventional (implicit) in bn euro in bn euo',%reportset%,ct)$(report_cost('cost investment conventional (implicit) in bn euro in bn euo',%reportset%,ct) < eps_rep_abs OR report('model status',%reportset
      %) <> 1) = 0 ;
                       report_cost('cost operation conventional (implicit) in bn euro',%reportset%,ct)$(report_cost('cost operation conventional (implicit) in bn euro',%reportset%,ct) < eps_rep_abs OR report('model status',%reportset%) <> 1) = 0 ;
                       report_cost('cost total (implicit) in bn euro',%reportset%,'total')$(report_cost('cost total (implicit) in bn euro',%reportset%,'total') < eps_rep_abs OR report('model status',%reportset%) <> 1) = 0 ;
      $ontext
 762   
                       report_tech('capacities storage GW',%reportset%,sto)$(report_tech('capacities storage GW',%reportset%,sto)< eps_rep_ins OR report('model status',%reportset%) <> 1) = 0 ;
                       report_tech('implicit capacities conventional GW',%reportset%,ct)$(report_tech('implicit capacities conventional GW',%reportset%,ct) < eps_rep_ins OR report('model status',%reportset%) <> 1) = 0 ;
                       report_tech('EP ratio storage',%reportset%,sto)$(report_tech('EP ratio storage',%reportset%,sto) < eps_rep_rel OR report('model status',%reportset%) <> 1) = 0 ;
                       report_tech('FLH storage',%reportset%,sto)$(report_tech('FLH storage',%reportset%,sto) < eps_rep_abs OR report('model status',%reportset%) <> 1) = 0 ;
       
                       report_cost('cost storage power in bn euro',%reportset%,sto)$(report_cost('cost storage power in bn euro',%reportset%,sto) < eps_rep_abs OR report('model status',%reportset%) <> 1) = 0 ;
                       report_cost('cost investment conventional (implicit) in bn euro in bn euo',%reportset%,ct)$(report_cost('cost investment conventional (implicit) in bn euro in bn euo',%reportset%,ct) < eps_rep_abs OR report('model status',%reportset
      %) <> 1) = 0 ;
                       report_cost('cost operation conventional (implicit) in bn euro',%reportset%,ct)$(report_cost('cost operation conventional (implicit) in bn euro',%reportset%,ct) < eps_rep_abs OR report('model status',%reportset%) <> 1) = 0 ;
                       report_cost('cost total (implicit) in bn euro',%reportset%,'total')$(report_cost('cost total (implicit) in bn euro',%reportset%,'total') < eps_rep_abs OR report('model status',%reportset%) <> 1) = 0 ;
      $ontext
 775   
 776  *$ontext
 777                   report_tech('capacities storage GW',loop_res_share,loop_curt,sto)$(report_tech('capacities storage GW',loop_res_share,loop_curt,sto)< eps_rep_ins OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 778                   report_tech('capacities conventional GW',loop_res_share,loop_curt,ct)$(report_tech('capacities conventional GW',loop_res_share,loop_curt,ct)< eps_rep_ins OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 779                   report_tech('EP ratio storage',loop_res_share,loop_curt,sto)$(report_tech('EP ratio storage',loop_res_share,loop_curt,sto)< eps_rep_rel OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 780                   report_tech('FLH storage',loop_res_share,loop_curt,sto)$(report_tech('FLH storage',loop_res_share,loop_curt,sto)< eps_rep_abs OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 781   
 782                   report_cost('cost storage power in bn euro',loop_res_share,loop_curt,sto)$(report_cost('cost storage power in bn euro',loop_res_share,loop_curt,sto)< eps_rep_ins OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 783                   report_cost('cost investment conventional in bn euro',loop_res_share,loop_curt,ct)$(report_cost('cost investment conventional in bn euro',loop_res_share,loop_curt,ct)< eps_rep_ins OR report('model status',loop_res_share,loop_curt) <
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                   07/06/18 12:06:55 Page 15
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


      > 1) = 0 ;
 784                   report_cost('cost operation conventional in bn euro',loop_res_share,loop_curt,ct)$(report_cost('cost operation conventional in bn euro',loop_res_share,loop_curt,ct)< eps_rep_ins OR report('model status',loop_res_share,loop_curt) <> 
      1) = 0 ;
 785                   report_cost('cost total',loop_res_share,loop_curt,'total')$(report_cost('cost total',loop_res_share,loop_curt,'total')< eps_rep_ins OR report('model status',loop_res_share,loop_curt) <> 1) = 0 ;
 788   
 789  Execute_Unload 'results_base_year_2014', report, report_tech, report_hours, report_cost, report_marginal ;
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                   07/06/18 12:06:55 Page 16
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Error Messages


140  Unknown symbol
141  Symbol declared but no values have been assigned. Check for missing
        data definition, assignment, data loading or implicit assignment
        via a solve statement.
        A wild shot: You may have spurious commas in the explanatory
        text of a declaration. Check symbol reference list.
257  Solve statement not checked because of previous errors

**** 20 ERROR(S)   0 WARNING(S)
GAMS 24.7.4  r58773 Released Sep 19, 2016 DEX-DEG x86 64bit/MacOS X                                                                                                                                                                   07/06/18 12:06:55 Page 17
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  /Users/claudiaguenther/Documents/dolores/original/MORITS.gms
     2      206 CALL           1     206  csv2gdx upload_data1.csv Output=Data_input UseHeader=Y
     3      207 GDXIN          1     207  /Users/claudiaguenther/Documents/dolores/original/Data_input.gdx


COMPILATION TIME     =        0.281 SECONDS      4 MB  24.7.4 r58773 DEX-DEG


USER: GAMS Development Corporation, Washington, DC   G871201/0000CA-ANY
      Free Demo,  202-342-0180,  sales@gams.com,  www.gams.com   DC0000


**** FILE SUMMARY

Input      /Users/claudiaguenther/Documents/dolores/original/MORITS.gms
Output     /Users/claudiaguenther/Documents/dolores/original/MORITS.lst

**** USER ERROR(S) ENCOUNTERED
